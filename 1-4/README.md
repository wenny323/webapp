# 待辦事項清單 - 伺服器端渲染

一個使用 Node.js + Express + EJS 建構的純後端渲染待辦事項應用。

## 🌟 專案特色

- ✅ **伺服器端渲染 (SSR)**: 使用 EJS 模板引擎，所有頁面在後端生成
- ✅ **傳統 Web 架構**: 使用 HTML Form 提交，無需前端 JavaScript
- ✅ **完整 CRUD 操作**: 新增、刪除、清空任務
- ✅ **資料持久化**: JSON 檔案儲存
- ✅ **即時回饋**: 顯示操作成功/錯誤訊息
- ✅ **現代化 UI**: 美觀的使用者介面設計

## 📋 功能列表

- 新增待辦事項
- 刪除單個待辦事項
- 清空所有待辦事項
- 顯示任務建立時間
- 任務計數顯示
- 操作回饋訊息

## 🛠 技術堆疊

- **後端框架**: Node.js + Express
- **模板引擎**: EJS
- **資料儲存**: JSON 檔案
- **樣式**: 內嵌 CSS

## 📂 專案結構

```
1-4/
├── server.js           # Express 伺服器 (監聽 port 1500)
├── storage.js          # 資料儲存模組
├── package.json        # 專案依賴配置
├── todos.json          # 資料儲存檔案 (自動產生)
├── views/              # EJS 模板目錄
│   └── index.ejs       # 主頁面模板
├── .gitignore          # Git 忽略檔案
└── README.md           # 本說明文件
```

## 🚀 安裝與執行

### 安裝依賴套件

```bash
npm install
```

### 啟動伺服器

```bash
npm start
```

或使用開發模式（自動重啟）：

```bash
npm run dev
```

### 訪問應用

開啟瀏覽器訪問：

```
http://localhost:1500
```

## 🔧 路由說明

### GET /
- **描述**: 顯示首頁，列出所有待辦事項
- **方法**: GET
- **參數**: 
  - `message` (查詢參數): 成功訊息
  - `error` (查詢參數): 錯誤訊息

### POST /add
- **描述**: 新增待辦事項
- **方法**: POST
- **表單欄位**: 
  - `text`: 待辦事項內容
- **重導向**: 成功後返回首頁並顯示訊息

### POST /delete/:id
- **描述**: 刪除指定的待辦事項
- **方法**: POST
- **參數**: 
  - `id`: 待辦事項 ID
- **重導向**: 成功後返回首頁並顯示訊息

### POST /clear
- **描述**: 清空所有待辦事項
- **方法**: POST
- **重導向**: 成功後返回首頁並顯示訊息

## 💾 資料儲存

- 資料儲存在 `todos.json` 檔案中
- 每個待辦事項包含：
  ```json
  {
    "id": 1697123456789,
    "text": "待辦事項內容",
    "createdAt": "2023-10-12T12:34:56.789Z"
  }
  ```
- 首次執行時會自動建立 `todos.json` 檔案

## 🎨 特色功能

### 1. 伺服器端渲染
所有頁面由後端 EJS 模板引擎生成，無需前端框架。

### 2. 表單提交
使用傳統的 HTML Form POST 方式進行資料提交。

### 3. URL 重導向
操作完成後使用 HTTP 重導向，並透過查詢參數傳遞訊息。

### 4. 訊息提示系統
- 成功訊息：綠色背景
- 錯誤訊息：紅色背景
- 自動動畫效果

### 5. 確認對話框
清空所有任務前會顯示確認對話框。

## 🆚 與 1-3 專案的差異

| 特性 | 1-3 (前後端分離) | 1-4 (純後端渲染) |
|------|-----------------|-----------------|
| **Port** | 1800 | 1500 |
| **渲染方式** | 客戶端渲染 (CSR) | 伺服器端渲染 (SSR) |
| **模板引擎** | 無 | EJS |
| **資料交換** | JSON API (Fetch) | HTML Form |
| **JavaScript** | 前端 JS 處理互動 | 後端處理所有邏輯 |
| **頁面更新** | 動態更新 DOM | 重新載入頁面 |
| **API 端點** | RESTful API | 傳統路由 |

## 📝 開發說明

- **伺服器埠號**: 1500
- **資料檔案**: `todos.json`
- **模板引擎**: EJS
- **無前端 JavaScript**: 所有互動透過表單提交

## ⚠️ 注意事項

- 首次執行時會自動建立 `todos.json` 檔案
- 確保埠號 1500 未被其他應用程式佔用
- 資料儲存在 `todos.json` 檔案中，刪除此檔案將清空所有資料
- 每次操作都會重新載入頁面（傳統 Web 行為）

## 🔄 與前後端分離版本比較

**1-4 (本專案) - 純後端渲染優點**:
- 更簡單的架構
- SEO 友善
- 首次載入更快
- 無需前端框架

**1-3 - 前後端分離優點**:
- 更好的使用者體驗（無頁面重載）
- 可獨立部署前後端
- 更適合複雜的互動應用

## 📄 License

ISC

